import LayoutPost from 'components/layout/post'
import { meta } from '_posts/como-usar-standard-en-next'

**Standard** qu√© ü§®???

Si no conoces standard, te invito a seguir leyendo.

Y si ya lo conoces, igual ü§™.

*(Este post ha sido actualizado para que no tengas problemas con las dependencias)*

Standard es una *gu√≠a de estilos JavaScript, con linter y correcci√≥n autom√°tica de c√≥digo*.

Podr√≠amos considerar que se "parece" a **Prettier**, pero, en t√©rminos concretos, no son lo mismo.

Prettier, es un formateador de c√≥digo, y tambien una gu√≠a de estilos, pero no es un Linter.

Standard si es un linter, o por lo menos, tiene reglas de eslint.

Ya hablaremos de Prettier en otra ocasi√≥n...

En su sitio web, standard dice que no necesita configuraci√≥n, y es verdad, pero va a depender el uso que se le de.

Standard, formatea tu c√≥digo, y te ayuda con los problemas de estilo y errores en tu c√≥digo.

Digamos que es como un asistente, que te ayuda con tu c√≥digo.

Ahora bien, esa ayuda, est√° basada en ciertas reglas que se deben cumplir:

- 2 espacios como sangr√≠a
- comillas simples en strings
- no dejar variables sin uso
- no usar punto y coma (esto es una de mis principales razones de porque lo uso üòÄ)
- espacios entre elementos de una funci√≥n o elementos nativos de javaScript
- entre otras reglas

Standard se puede instalar de manera global en tu equipo, pero no lo recomiendo. Siempre es mejor hacerlo a nivel local del proyecto, pues, de esta manera evitas problemas locos que se pueden generar ah√≠ en un proyecto determinado, donde Eslint, Prettier y agreg√°ndole Standard, se ponen a pelear (si te ha pasado, ya sabes de lo que hablo jajaja).

Pero bueno, no te voy a ense√±ar sobre Standard, sino m√°s bien, te mostrar√© c√≥mo se puede usar en un proyecto de Nextjs.

Lo primero que debes hacer es iniciar un proyecto con Create Next App.

```bash
npx create-next-app
```

Inmediamente, la terminal que uses, te preguntar√° por el nombre de tu proyecto:

```bash
? What is your project named?
```

Aunque si quieres evitar este paso, puedes usar

```bash
npx create-next-app mi-nueva-app
```

Es decir, puedes poner el nombre de tu proyecto desde antes.

Sigamos...

Lo que har√° npx, es instalar en tu nueva carpeta (que ser√° el nombre de tu proyecto escogido), las dependencias necesarias para poder comenzar tu proyecto, que son 3.

React
React-Dom
Next

Por lo que si no quisieras usar create-next-app puedes instalar tu mismo en tu proyecto con Yarn o NPM ya inicializado.

```bash
yarn add react react-dom next
```

o

```bash
npm install react react-dom next
```

Solo recuerda, que tendr√°s que agregar otras cosas extras para que funcione todo bien, que son m√°s que nada, la carpeta "/pages", la carpeta "/public" y por su puesto, tu .gitignore y README.md.

Ahora bien, como usamos NPX en el ejemplo, ya dentro tendr√° todo lo necesario.

Ahora instalaremos standard y otras cosas m√°s.

Considera lo siguiente. Si estamos usando Next, significa que estamos utilizando React tambi√©n, eso significa que usaremos JSX en nuestros componentes.

Recordemos que JSX es una sintaxis de javaScript que se usa en React, por ende, si vamos a usar standardjs, debe ser para JSX.

Si no sabes mucho de lo que he estado escribiendo, pronto podr√°s comprobar a que me refiero.

Vamos a usar las reglas de standard para react: eslint-config-standard-react

Siguiendo la documentaci√≥n, nos indica que debemos instalar todo esto como dependencias de desarrollo:

```bash
yarn add -D eslint babel-eslint eslint-config-standard eslint-config-standard-react eslint-plugin-standard eslint-plugin-promise eslint-plugin-import eslint-plugin-node eslint-plugin-react
```

o

```bash
npm install -D eslint babel-eslint eslint-config-standard eslint-config-standard-react eslint-plugin-standard eslint-plugin-promise eslint-plugin-import eslint-plugin-node eslint-plugin-react
```

Son bastantes dependencias, pero vamos en orden.

Primero est√° eslint, que es finalmente para que todo funcione.

Luego viene babel-eslint. Te cuento un secreto. Si no lo instalas, va a funcionar igual, pero, en la documentaci√≥n de standard, ellos lo recomiendan. Por qu√©?
Standard soporta las ultimas caracter√≠sticas de ECMAscript, ES8 (ES2017) incluyendo todas las caracter√≠sticas del lenguaje de las propuestas que estan en "Stage 4" del proceso de propuestas.

No obstante, si quieres usar caracter√≠sticas experimentales de javaScript, babel-eslint es quien te ayuda, pero, Babel ha actualizado esta dependencia a otra nueva que es:

```bash
@babel/eslint-parser
```

Qu√© enredado, si quieres profundizar sobre esto puedes leer el [estado de babel-eslint](https://babeljs.io/blog/2020/07/13/the-state-of-babel-eslint "estado de babel-eslint") pero no perdamos tiempo en esto por ahora. As√≠ que dejemoslo como ellos recomiendan.

Tambi√©n est√° eslint-config-standard, que es finalmente, las reglas de standard y eslint-config-standard-react las reglas de standard para react, como tambi√©n los plugins eslint-plugin-standard eslint-plugin-promise eslint-plugin-import eslint-plugin-node eslint-plugin-react. 

Claramente el primer plugin hace referencia a standard, luego viene promise, para las promesas, luego import, para la sintaxis import/export, node para el entorno de node, y finalmente el plugin para react.

Ahora, debemos agregar el archivo de configuraci√≥n de reglas de eslint: .eslintrc

```json
{
  "env": {
    "browser": true,
    "es2020": true,
    "node": true
  },
  "parser": "babel-eslint",
  "extends": ["standard", "standard-react"]
}
```

Ahora que hemos instalado todo esto y creado el archivo de configuraci√≥n de eslint, vamos al archivo index.js dentro de la carpeta /pages.

S√© lo que pasar√°.

Todo te saldr√° con muchas l√≠neas rojas de errores debajo del ejemplo b√°sico que viene incluido en el proyecto de Next.

El error es este:

```jsx
'React' must be in scope when using JSX eslint(react/react-in-jsx-scope)
```

Esto es, porque en Next, no es necesario importar React en cada componente (algo que en React debemos hacer constantemente).

Si quieres ver con m√°s detalles los errores, te recomiendo instalar la extensi√≥n (si es que usas VSCODE, que es mi otra recomendaci√≥n), [Error Lens.](https://marketplace.visualstudio.com/items?itemName=usernamehw.errorlens "Error Lens")

```jsx
import React from 'react'
```

No es necesario hacerlo en Next, por lo que para evitar este error haremos el primer cambio en nuestro archivo de configuraci√≥n de eslint.

```json
{
  "env": {
    "browser": true,
    "es2020": true,
    "node": true
  },
  "parser": "babel-eslint",
  "extends": ["standard", "standard-react"],
  "rules": {
    "react/react-in-jsx-scope": "off",
  }
}
```

Listo!!! ahora, se ha arreglado ese error que ten√≠amos de tener React en el scope de nuestro c√≥digo, que se exige al usar JSX.

Ahora, cada vez que escribas c√≥digo, se autoformatear√°. Por ejemplo si escribes el siguiente componente Title (creamos la carpeta "components" en la ra√≠z del proyecto y dentro el archivo title.js):

```jsx
export default function Title ({ className, children }) {
  return (
    <h1 className={className}>{children}</h1>
  )
}
```

Oppss!! üò± otro error!!!

```jsx
'children' is missing in props validation eslint(react/prop-types)
```

Claro, porque por defecto, otra regla de React que trae el pluging React Eslint, es que cada prop se debe validar con propTypes.

Si somos correctos, esto deber√≠a mantenerse, aunque se puede dejar que este error no aparezca si cambiamos una regla as√≠:

```json
{
  "env": {
    "browser": true,
    "es2020": true,
    "node": true
  },
  "parser": "babel-eslint",
  "extends": ["standard", "standard-react"],
  "rules": {
    "react/react-in-jsx-scope": "off",
    "react/prop-types": "off"
  }
}
```

As√≠ se puede arreglar, no obstante, como dije, no es lo correcto, lo mejor ser√≠a que se pudiera agregar la validaci√≥n de propTypes, pero eso lo dejaremos para otra publicaci√≥n.

Y listo!!!

Ahora recapitulemos la implementaci√≥n de Standardjs en tu proyecto de Next.

Primero debes iniciar un proyecto Next o tambi√©n, en un proyecto que ya est√© andando.

Luego debes instalar las dependencias de desarrollo de standard para react.

```bash
yarn add -D eslint babel-eslint eslint-config-standard eslint-config-standard-react eslint-plugin-standard eslint-plugin-promise eslint-plugin-import eslint-plugin-node eslint-plugin-react
```

Luego agregar el archivo de configuraci√≥n .eslintrc.

```json
{
  "env": {
    "browser": true,
    "es2020": true,
    "node": true
  },
  "parser": "babel-eslint",
  "extends": ["standard", "standard-react"],
  "rules": {
    "react/react-in-jsx-scope": "off",
    "react/prop-types": "off"
  }
}
```

Recuerda que la validaci√≥n de "prop-types" es muy buena, y deber√≠as usarla, pero para efectos de este proyecto de prueba, lo haremos as√≠.

Y listo, ya tienes configurado en tu proyecto de next, lo que necesitas para trabajar con standardjs.

Gracias por leer.

Puedes encontrar este ejemplo en mi **[github](https://github.com/nikosantis/next-with-standardjs "github")**

**BONUS:**

Te recomiendo agregar otro plugin de eslint para ayudarte con los hooks de React.

```bash
yarn add -D eslint-plugin-react-hooks
```

Y el archivo de configuraci√≥n deber√≠a quedar as√≠:

```json
{
  "env": {
    "browser": true,
    "es2020": true,
    "node": true
  },
  "parser": "babel-eslint",
  "extends": ["standard", "standard-react"],
  "plugins": ["react-hooks"],
  "rules": {
    "react/react-in-jsx-scope": "off",
    "react/prop-types": "off",
    "react-hooks/rules-of-hooks": "error",
    "react-hooks/exhaustive-deps": "warn"
  }
}
```

Y listo üòÄ!!!

export default ({children}) => <LayoutPost { ...meta }>{children}</LayoutPost>