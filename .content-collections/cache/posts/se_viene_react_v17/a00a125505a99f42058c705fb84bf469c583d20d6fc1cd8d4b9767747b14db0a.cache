{"content":"Hoy se ha publicado en el blog oficial de React el primer Release Candidate para React 17, luego de dos a침os y medio desde el 칰ltimo release importante (ha pasado bastante no?).\n\n## No tiene nuevas funciones\n\nLa versi칩n 17 de React es bastante inusual, como dicen en el blog, porque no agrega ninguna caracter칤stica nueva para desarrolladores. Es decir, si esper치bamos nuevos hooks para hacer otras cosas locas, no vendr치 nada de esto.\n\nEsta nueva versi칩n se est치 centrando principalmente en **facilitar la actualizaci칩n de React**.\n\nNo hay que asustarse al pensar que no est치n trabajando en nuevas funcionalidades, al contrario, pero no forman parte de esta versi칩n.\n\nEl enfoque est치 en **no dejar a nadie atr치s**. React 17 es una versi칩n **\"trampol칤n\"** que hace que sea m치s seguro insertar un 치rbol administraro por una versi칩n de React dentro de un 치rbol administrado por una versi칩n diferente de React.\n\n## Actualizaciones graduales\n\nDurante los 칰ltimos siete a침os, las actualizaciones de React han sido de \"todo o nada\". O te quedabas con una versi칩n anterior o actualizas toda la aplicaci칩n a una nueva versi칩n. No hubo intermedios.\n\nEsto hab칤a funcionado hasta ahora, pero React est치 llegando a los l칤mites de esa estrategia de actualizaci칩n (todo o nada). Algunos cambios de API, por ejemplo, la desaprobaci칩n de la _API de Contexto heredado_, son imposibles de realizar de una forma automatizada. Aunque la mayor칤a de las aplicaciones escritas hoy en d칤a nunca las usan, a칰n se admiten en React. Se tendr칤a que elegir entre admitirlas en React indefinitivamente o dejar algunas aplicaciones en una versi칩n anterior de React, donde ambas opciones no son muy buenas.\n\nPor eso es que se han enfocado en otra opci칩n.\n\nReact 17 va a permitir actualizaciones graduales de React. Cuando actualices React 15 a 16 (o 16 a 17 游땸), generalmente actualizar치 toda la aplicaci칩n de una vez. Esto funciona bien para muchas aplicaciones, pero puede volverse cada vez m치s desafiante si el c칩digo base se escribi칩 hace m치s de unos a침os y no se mantiene. Aunque es posible usar dos versiones de React en una misma p치gina, hasta React 17 esto ha sido fr치gil y ha causado problemas con los eventos.\n\nEn React est치n solucionando muchos de estos problemas con React 17. Esto significa que cuando salga React 18 y las pr칩ximas futuras versiones, ahora habr치n m치s opciones.\n\nLa primera opci칩n ser치 actualizar toda la aplicaci칩n de una vez, como podr칤a haber hecho antes. Pero tambi칠n tendr치 la opci칩n de actualizar la aplicaci칩n pieza por pieza. Por ejemplo, se podr치 decidir migrar la mayor parte de una aplicaci칩n a React 18, pero mantener un cuadro de di치logo cargado de forma diferida a una subruta en React 17.\n\nOJO: Esto no significa que se deben hacer mejoras graduales. Para la mayor칤a de las aplicaciones, actualizar todo de una vez sigue siendo la mejor soluci칩n. Cargar dos versiones de React, incluso si una de ellas se carga de forma Lazy a pedido, todav칤a no es lo ideal. Sin embargo, para aplicaciones m치s grandes que no se mantienen, es una opci칩n que puede tener sentido y React 17 permitir치 que estas aplicaciones no se queden atr치s.\n\nPara habilitar las actualizaciones graduales, necesitamos realizar algunos cambios en el sistema de eventos de React. La versi칩n 17 es importante porque estos cambios potencialmente se est치 rompiendo. En la pr치ctica, solo se ha tenido que cambiar menos de 20 componentes de m치s de 100 mil, por lo que esperan, en React, que la mayor칤a de las aplicaciones puedan actualizarse a React 17 sin demasiados problemas. (ahora m치s en la pr치ctica, puede que haya problemas igual no?)\n\nHay un repositorio de ejemplo que demuestra c칩mo cargar de forma diferida una versi칩n anterior de React si es necesario. Es una demo que utiliza CRA (create-react-app), pero deber칤a ser posible seguir un enfoque similar con cualquier otra herramienta. [Aqu칤 el demo.](https://github.com/reactjs/react-gradual-upgrade-demo/ 'Aqu칤 el demo.')\n\nAlgo importante que ellos mencionan:\n\n> Se han pospuesto otros cambios hasta despu칠s de React 17. Porque si el objetivo de esta versi칩n es ayudar a la actualizaci칩n y a no dejar a nadie atr치s, pero la actualizaci칩n se torna demasiado dif칤cil, estar칤a totalmente frustrado el prop칩sito.\n\n## Cambios en Event Delegation\n\nT칠cnicamente, siempre ha sido posible anidar aplicaciones desarrolladas con diferentes versiones de React, pero es bastante fr치gil debido a c칩mo funcionaba el sistema de eventos de React.\n\nEn los componentes de React, usualmente se escriben controladores de eventos en l칤nea.\n\n```jsx title=\"index.jsx\"\n<button onClick={handleClick}>\n```\n\nEl c칩digo equivalente en DOM vanilla es algo como:\n\n```js title=\"index.js\"\nmyButton.addEventListener('click', handleClick)\n```\n\nSin imbargo, para la mayor칤a de los eventos, React no los adjunta a los nodos DOM en los que los declara. En cambio, React adjunta un controlador por tipo de evento directamente en el nodo `document`. A esto se le llama **event delegation**. Adem치s de sus beneficios de rendimiento en 치rboles grandes de una aplicaci칩n, tambi칠n facilita la edici칩n de nuevas funciones como la **reproducci칩n de eventos**.\n\nReact ha estado delegando eventos autom치ticamente desde el primer lanzamiento. Cuando un evento DOM se dispara en el document, React determina a qu칠 componente llamar, y luego el evento React \"burbujea\" hacia arriba a trav칠s de sus componentes. Pero detr치s de escena, el evento nativo ya ha subido al nivel `document`, donde React instala sus controladores de eventos.\n\nSin embargo, este es un problema para las actualizaciones graduales.\n\nSi tienes varias versiones de React en la p치gina, todas se registran controladores de eventos en la parte superior. Esto rompe `e.stopProgataion()`: si un 치rbol anidado ha detenido la propagaci칩n de un evento, el 치rbol externo a칰n no lo recibir치. Esto hizo que fuera dif칤cil anidar diferentes versiones de React. Esta preocupaci칩n, como mencionan ellos, no es hipot칠tica; por ejemplo, el editor Atom se encontr칩 con esto hace cuatro a침os.\n\nEs por eso (y luego de esta explicaci칩n anterior) que en React est치n cambiando la forma en que se adjunte los eventos al DOM debajo del cap칩.\n\n**En React 17, ya no se adjuntar치 controladores de eventos en el nivel `document`. En cambio, los adjuntar치 al contenedor DOM ra칤z en el que se representa su 치rbol:**\n\n```jsx title=\"index.jsx\"\nconst rootNode = document.getElementById('root')\nReactDOM.render(<App />, rootNode)\n```\n\nEn React 16 y versiones anteriores, React `document.addEventListener()` funcionar칤a para la mayor칤a de eventos. React 17 llamar치 a `rootNode.addEventListener()` debajo del cap칩 en su lugar.\n\nGracias a este importante cambio, ahora es m치s seguro incrustar un 치rbol de React administrado por una versi칩n dentro de un 치rbol administrado por una versi칩n de React diferente. Hay quer tener en cuenta que, para que esto funcione, ambas versiones deber칤an ser 17 o superior, por lo que es importante actualizar a la versi칩n 17. En cierto modo, React 17 es un release de \"trampol칤n\", que hace factible adelantarse a las futuras actualizaciones.\n\nEste cambio tambi칠n facilita la integraci칩n de React en aplicaciones creadas con otras tecnolog칤as. Por ejemplo, si el \"shell\" externo de una aplicaci칩n est치 escrito en jQuery, pero el c칩digo m치s nuevo dentro de 칠l est치 escrito con React, `e.stopPropagation()` dentro del c칩digo React ahora evitar칤a que alcance el c칩digo jQuery, como era de esperar. Esto tambi칠n funciona en direcci칩n contraria. Si ya no nos gustar치 React y dese치ramos reescribir la aplicaci칩n, por ejemplo, en jQuery, se puede comenzar a convertir el shel externo de React a jQuery sin interrumpir la propagaci칩n del evento.\n\nEn React han confirmado que numerosos problemas reportados a lo largo de los a침os relacionado con la integraci칩n de React con c칩digo que no es de React.\n\nEn el caso de los **Portales**, React tambi칠n escucha eventos de 칠l, as칤 que no es un problema.\n\n### Solucionar problemas potenciales\n\nAl igual que con cualquier cambio importante, es probable que sea necesario ajustar alg칰n c칩digo. En Facebook, tuvieron que ajustar unos 10 m칩dulos en total (de muchos miles) para trabajar con este cambio.\n\nPor ejemplo, si se agrega listeners manuales al DOM con `document.addEventListener(...)` se puede esperar que capturen todos los eventos React. En React 16 y versiones anteriores, incluso si llama `e.stopPropagation()` a un controlador de eventos React, los listeners `document` personalizados a칰n lo recibir칤an porque el evento nativo ya est치 en el nivel del document. Con React 17, la propagaci칩n se detendr칤a (!seg칰n lo solicitado!), por que sus controladores `document` no disparar칤an:\n\n```js title=\"index.js\"\ndocument.addEventListener('click', function () {\n  // este controlador no recibir치 m치s clics\n  // de los componentes de React que llamen e.stopPropagation()\n})\n```\n\nSe puede corregir un c칩digo como este convirtiendo el listener para usar la fase de captura. Para hace esto, se puede pasar `{ capture: true }` como tercer argumento a `document.addEventListener`:\n\n```js title=\"index.js\"\ndocument.addEventListener(\n  'click',\n  function () {\n    // ahora este controlador de evento usa la fase de captura\n    // por lo que recibe *todos* los eventos de clic que siguen\n  },\n  { capture: true }\n)\n```\n\nHay que tener en cuenta c칩mo esta estrategia es m치s resistente en general; por ejemplo, probablemente solucionar치 los errores existentes en el c칩digo que ocurren cuando `e.stopPropagation()` se llame fuera de un controlador de eventos de React. En otras palabras, la propagaci칩n de eventos en React 17 funciona m치s cerca del DOM normal.\n\n---\n\n## Otros cambios importantes\n\nSe ha mantenido los cambios importantes en React 17 al m칤nimo. Por ejemplo, no elimina ninguno de los m칠todos que han quedado obsoletos en versiones anteriores. Sin embargo, incluye algunos otros cambios importantes que han sido relativamente seguros la experiencia de React. En total, han tenido que ajustar menos de 20 de cada 100.000+ de los componentes debido a ellos.\n\n### Alineando con los navegadores\n\nSe han realizado un par de cambios m치s peque침os relacionados con el sistema de eventos:\n\n- El evento `onScroll` **ya no burbujea** para evitar una confusi칩n com칰n.\n- Los eventos React `onFocus` y `onBlur` han cambiado al uso de eventos nativos `focusin` y `focusout` bajo el cap칩, que se ajustan m치s al comportamiento existente de React y, a veces, brindan informaci칩n adicional.\n- Los eventos de la fase de captura (ej: `onClickCapture`) ahora utilizan listeners de fase de captura reales de navegador.\n\nEstos cambios alinean React m치s cerca del comportamiento del navegador y mejorar la interoperabilidad.\n\n### Sin agrupaci칩n de eventos\n\nReact 17 elimina la optimizaci칩n de \"agrupaci칩n de ventos\" de React. No mejora el rendimiento en los navegadores modernos y confunde incluso a los usuarios experimentados de React:\n\n```jsx title=\"index.jsx\"\nfunction handleChange(e) {\n  setData((data) => ({\n    ...data,\n    // esto hace crash en React 16 y anteriores\n    text: e.target.value\n  }))\n}\n```\n\nEsto se debe a que React reutiliz칩 los objetos de eventos entre diferentes eventos para el rendimiento en navegadores antiguos y estableci칩 todos los campos de eventos `null` entre ellos. Con React 16 y versiones anteriores, se debe llamar a `e.persist()` para usar correctamente el evento o leer la propiedad que se necesita antes.\n\n**En React 17, este c칩digo funciona como era de esperar. La antigua optimizaci칩n de agrupaci칩n de eventos se ha eliminado por completo, por lo que se puede leer los campos de eventos siempre que se necesite.**\n\nEste es un cambio de comportamiento, por lo que est치n marcando como roto, pero en la pr치ctica no lo han visto romper nada en Facebook. (!Quiz치s incluso solucion칩 algunos errores!). Hay que tener en cuenta que `e.persist()` todav칤a est치 disponible en el objeto de evento React, pero ahora no hace nada.\n\n### Effect Cleanup Timing\n\nEst치n haciendo que la sincronizaci칩n de la funci칩n de limpieza de `useEffect` sea m치s consistente.\n\n```jsx title=\"index.jsx\"\nuseEffect(() => {\n  // este es el efecto en s칤\n  return () => {\n    // esto es un limpiador\n  }\n})\n```\n\nLa mayor칤a de los efectos no necesitan retrasar las actualizaciones de la pantalla, por lo que React los ejecuta de forma asincr칩nica poco despu칠s de que la actualizaci칩n se refleje en la pantalla. (Para los casos excepcionales en los que se necesite un efecto para bloquear el paint, por ejemplo, para medir y colocar una informaci칩n sobre herramientas, hay que preferir `useLayoutEffect`).\n\nSin embargo, cuando se desmonta un componente, las funciones de _limpieza_ del efecto se utilizan para ejecutarse sincr칩nicamente (similar a `componentWillUnmount` de manera sincr칩nica en las clases). Han descubierto que esto no es ideal para aplicaciones m치s grandes porque relentiza las transiciones de pantalla grande (por ejemplo, cambiar de pesta침a).\n\n**En React 17, la funci칩n de limpieza de efectos siempre se ejecutar치 de forma asincr칩nica; por ejemplo, si el componente se est치 desmontando, la limpieza se ejecutar치 despu칠s de que se haya actualizado la pantalla.**\n\nEsto refleja c칩mo los efectos en s칤 se ejecutan m치s de cerca. En los raros casos en los que desee confiar en la ejecuci칩n sincr칩nica, se puede cambiar a `useLayoutEffect`.\n\nAdem치s, React 17 siempre ejecutar치 todas las funciones de limpieza de efectos (para todos los componentes) antes de ejecutar cualquier efecto nuevo. React 16 solo garantiz칩 este orden para los efectos dentro de un componente.\n\n### Problemas potenciales\n\nSolo han visto un par de componentes que se rompen con este cambio, aunque es posible que las bibliotecas reutilizables deban probarlo m치s a fondo. Un ejemplo de c칩digo con problemas puede verse as칤:\n\n```jsx title=\"index.jsx\"\nuseEffect(() => {\n  someRef.current.someSetupMethod()\n  return () => {\n    someRef.current.someCleanupMethod()\n  }\n})\n```\n\nEl problema es que el `someRef.current` es mutable, por lo que cuando se ejecuta la funci칩n de limpieza, es posible que se haya configurado en `null`. La soluci칩n es capturar cualquier valor mutable _dentro_ del efecto:\n\n```jsx title=\"index.jsx\"\nuseEffect(() => {\n  const instance = someRef.current\n  instance.someSetupMethod()\n  return () => {\n    instance.someCleanupMethod()\n  }\n})\n```\n\nNo esperan que esto sea un problema com칰n porque la regla de eslint **eslint-plugin-react-hooks/exhaustive-deps** (!칰sala!) siempre ha advertido sobre esto.\n\n### Errores consistentes para devolver undefined\n\nEn React 16 y versiones anteriores, regresar `undefined` siempre ha sido un error:\n\n```jsx title=\"index.jsx\"\nfunction Button() {\n  return // error: nada ha retornado\n}\n```\n\nEsto se debe en parte a que es f치cil volver `undefined` sin querer:\n\n```jsx title=\"index.jsx\"\nfunction Button() {\n  // hemos olvidado escribir return, por lo tanto este componente retorna undefined\n  // React muestra esto como un error en lugar de ignorarlo\n  ;<button />\n}\n```\n\nAnteriormente, React solo hac칤a esto para los componentes de clase y funci칩n, pero no verificaba los valores de retorno de `forwardRef` y los componentes `memo`. Esto se debi칩 a un error de codificaci칩n.\n\nEn React 17, el comportamiento de los componentes forwardRef y memo, es coherente con los componentes de clase y funciones regulares. Retornar undefined de ellos es un error.\n\n```jsx title=\"index.jsx\"\nlet Button = forwardRef(() => {\n  // hemos olvidado escribir return, por lo tanto este componente retorna undefined\n  // React 17 muestra esto como un error en lugar de ignorarlo\n  ;<button />\n})\n\nlet Button = memo(() => {\n  // hemos olvidado escribir return, por lo tanto este componente retorna undefined\n  // React 17 muestra esto como un error en lugar de ignorarlo\n  ;<button />\n})\n```\n\nPara los casos en los que no se desee representar nada intencionalmente, se debe retornar `null` en su lugar.\n\n### Stack de componentes nativos\n\nCuando el navegador arroja un error, el navegador proporciona un seguimiento del stack con los nombres de las funciones de JavaScript y sus ubicaciones. Sin embargo, los stack de JavaScript no suelen ser suficientes para diagnosticar un problema porque la jerarqu칤a del 치rbol de React puede ser igualmente importante. Se desea saber no solo que `Button` arroj칩 un error, sino tambi칠n en qu칠 parte del 치rbol de React el `Button`se encuentra.\n\nPara resolver esto, React 16 comenz칩 a imprimir \"stack de componentes\" cuando se tiene un error. A칰n as칤, sol칤an ser inferiores a los stack de JavaScript nativos. En particular, no se pod칤a hacer clic en la consola porque React no sab칤a d칩nde se declar칩 la funci칩n en el c칩digo fuente. Adem치s, en su mayor칤a fueron in칰tiles en la producci칩n. A diferencia de los stack de JavaScript minificados regulares que se pueden restaurar autom치ticamente a los nombres de las funciones originales con un mapa de origen, con los stack de componentes de React se ten칤a que elegir entre el stack de producci칩n y tama침o de paquete.\n\n**En React 17, los stack de componentes se generan utilizando un mecanismo diferente que las une a los stack de JavaScript nativos normales. Esto permite obtener los seguimientos del stack de componentes de React completamente simbolizados en un entorno de producci칩n.**\n\nLa forma en que React implementa esto es algo poco ortodoxo. Actualmente, los navegadores no proporcionan una forma de obtener el marco del stack de una funci칩n (archivo de origen y ubicaci칩n). Entonces, cuando React detecta un error, ahora reconstruir치 su stack de componentes lanzados (y capturando) un error temporal desde el interior de cada uno de los componentes anteriores, cuando sea posible. Esto agrega una peque침a penalizaci칩n de rendimiento por fallas, pero solo ocurre una vez por tipo de componente.\n\nEsta parte constituye un cambio importante para que esto funcione, React vuelve a ejecutar partes de algunas de las funciones de React y los constructores de la clase React anteriores en la pila despu칠s de que se captura un error. Dado que las funciones de renderizado y los constructores de clases no deber칤an tener efectos secundarios (que tambi칠n es importante para la renderizaci칩n del servidor), esto no deber칤a plantear ning칰n problema pr치ctico.\n\n### Eliminaci칩n de exportaciones privadas\n\nFinalmente (s칤, por fin dir치s 游뱕), el 칰ltimo cambio notable es que han eliminado algunos componentes internos de React que estaba expuestos anteriormente a otros proyectos. En particular, React Native para Web, sol칤a depender de algunos componentes internos del sistema de eventos, pero esa dependencia era fr치gil y sol칤a romperse.\n\n**En React 17, estas exportaciones privadas se han eliminado. Hasta donde saben, React Native para Web fue el 칰nico proyecto que las us칩, y ya completaron una migraci칩n a un enfoque diferente que no depende de esas exportaciones privadas.**\n\nEsto significa que las versiones anteriores de React Native para Web, no ser치n compatibles con React 17, pero las versiones m치s nuevas funcionar치n con 칠l. En la pr치ctica, esto no cambia mucho porque React Native para Web tuvo que lanzar nuevas versiones para adaptarse a los cambios internos de React de todos modos.\n\nAdem치s, han eliminado los m칠todos auxiliares `ReactTestUtils.SimulateNative`. Nunca se han documentado, no hicieron exactamente lo que sus nombres implicaban y no funcionaron con los cambios que se hicieron en el sistema de eventos. Si se desea una forma conveniente de activar eventos nativos del navegador en los tests, ver [React Testing Library](https://testing-library.com/docs/dom-testing-library/api-events 'React Testing Library').\n\n## Para probar / Instalaci칩n\n\nSi quieres probar el release candidate React 17.0 pronto y as칤 tambi칠n plantear alg칰n problema que puedas encontrar, debes tener en cuenta que es m치s probable que una versi칩n candidata contenga errores que una versi칩n estable, as칤 que no la implementes todav칤a en producci칩n.\n\nPara instalar React 17 RC con NPM, debes ejecutar:\n\n```bash\nnpm install react@17.0.0-rc.2 react-dom@17.0.0-rc.2\n```\n\nPara instalar React 17 RC con Yarn, debes ejecutar:\n\n```bash\nyarn add react@17.0.0-rc.2 react-dom@17.0.0-rc.2\n```\n\nTambi칠n se ha proporcionado compilaciones UMD de React a trav칠s de una CDN:\n\n```html\n<script\n  crossorigin\n  src=\"https://unpkg.com/react@17.0.0-rc.2/umd/react.production.min.js\"\n></script>\n<script\n  crossorigin\n  src=\"https://unpkg.com/react-dom@17.0.0-rc.2/umd/react-dom.production.min.js\"\n></script>\n```\n\nUff que largo.\n\nFuente: https://reactjs.org/blog/2020/08/10/react-v17-rc.html (ingl칠s)","title":"Se viene React v17.0 sin nuevas funciones","description":"En el blog oficial de React se ha publicado el primer candidato a lanzamiento para React 17, luego de dos a침os y medio de un importante lanzamiento anterior.","publishedAt":"8/10/2020","isOld":true,"_meta":{"filePath":"se-viene-react-v17.mdx","fileName":"se-viene-react-v17.mdx","directory":".","extension":"mdx","path":"se-viene-react-v17"},"toc":[{"title":"No tiene nuevas funciones","url":"#no-tiene-nuevas-funciones","depth":2},{"title":"Actualizaciones graduales","url":"#actualizaciones-graduales","depth":2},{"title":"Cambios en Event Delegation","url":"#cambios-en-event-delegation","depth":2},{"title":"Solucionar problemas potenciales","url":"#solucionar-problemas-potenciales","depth":3},{"title":"Otros cambios importantes","url":"#otros-cambios-importantes","depth":2},{"title":"Alineando con los navegadores","url":"#alineando-con-los-navegadores","depth":3},{"title":"Sin agrupaci칩n de eventos","url":"#sin-agrupaci칩n-de-eventos","depth":3},{"title":"Effect Cleanup Timing","url":"#effect-cleanup-timing","depth":3},{"title":"Problemas potenciales","url":"#problemas-potenciales","depth":3},{"title":"Errores consistentes para devolver undefined","url":"#errores-consistentes-para-devolver-undefined","depth":3},{"title":"Stack de componentes nativos","url":"#stack-de-componentes-nativos","depth":3},{"title":"Eliminaci칩n de exportaciones privadas","url":"#eliminaci칩n-de-exportaciones-privadas","depth":3},{"title":"Para probar / Instalaci칩n","url":"#para-probar--instalaci칩n","depth":2}],"structuredData":{"contents":[{"heading":"","content":"Hoy se ha publicado en el blog oficial de React el primer Release Candidate para React 17, luego de dos a침os y medio desde el 칰ltimo release importante (ha pasado bastante no?)."},{"heading":"no-tiene-nuevas-funciones","content":"La versi칩n 17 de React es bastante inusual, como dicen en el blog, porque no agrega ninguna caracter칤stica nueva para desarrolladores. Es decir, si esper치bamos nuevos hooks para hacer otras cosas locas, no vendr치 nada de esto."},{"heading":"no-tiene-nuevas-funciones","content":"Esta nueva versi칩n se est치 centrando principalmente en facilitar la actualizaci칩n de React."},{"heading":"no-tiene-nuevas-funciones","content":"No hay que asustarse al pensar que no est치n trabajando en nuevas funcionalidades, al contrario, pero no forman parte de esta versi칩n."},{"heading":"no-tiene-nuevas-funciones","content":"El enfoque est치 en no dejar a nadie atr치s. React 17 es una versi칩n \"trampol칤n\" que hace que sea m치s seguro insertar un 치rbol administraro por una versi칩n de React dentro de un 치rbol administrado por una versi칩n diferente de React."},{"heading":"actualizaciones-graduales","content":"Durante los 칰ltimos siete a침os, las actualizaciones de React han sido de \"todo o nada\". O te quedabas con una versi칩n anterior o actualizas toda la aplicaci칩n a una nueva versi칩n. No hubo intermedios."},{"heading":"actualizaciones-graduales","content":"Esto hab칤a funcionado hasta ahora, pero React est치 llegando a los l칤mites de esa estrategia de actualizaci칩n (todo o nada). Algunos cambios de API, por ejemplo, la desaprobaci칩n de la API de Contexto heredado, son imposibles de realizar de una forma automatizada. Aunque la mayor칤a de las aplicaciones escritas hoy en d칤a nunca las usan, a칰n se admiten en React. Se tendr칤a que elegir entre admitirlas en React indefinitivamente o dejar algunas aplicaciones en una versi칩n anterior de React, donde ambas opciones no son muy buenas."},{"heading":"actualizaciones-graduales","content":"Por eso es que se han enfocado en otra opci칩n."},{"heading":"actualizaciones-graduales","content":"React 17 va a permitir actualizaciones graduales de React. Cuando actualices React 15 a 16 (o 16 a 17 游땸), generalmente actualizar치 toda la aplicaci칩n de una vez. Esto funciona bien para muchas aplicaciones, pero puede volverse cada vez m치s desafiante si el c칩digo base se escribi칩 hace m치s de unos a침os y no se mantiene. Aunque es posible usar dos versiones de React en una misma p치gina, hasta React 17 esto ha sido fr치gil y ha causado problemas con los eventos."},{"heading":"actualizaciones-graduales","content":"En React est치n solucionando muchos de estos problemas con React 17. Esto significa que cuando salga React 18 y las pr칩ximas futuras versiones, ahora habr치n m치s opciones."},{"heading":"actualizaciones-graduales","content":"La primera opci칩n ser치 actualizar toda la aplicaci칩n de una vez, como podr칤a haber hecho antes. Pero tambi칠n tendr치 la opci칩n de actualizar la aplicaci칩n pieza por pieza. Por ejemplo, se podr치 decidir migrar la mayor parte de una aplicaci칩n a React 18, pero mantener un cuadro de di치logo cargado de forma diferida a una subruta en React 17."},{"heading":"actualizaciones-graduales","content":"OJO: Esto no significa que se deben hacer mejoras graduales. Para la mayor칤a de las aplicaciones, actualizar todo de una vez sigue siendo la mejor soluci칩n. Cargar dos versiones de React, incluso si una de ellas se carga de forma Lazy a pedido, todav칤a no es lo ideal. Sin embargo, para aplicaciones m치s grandes que no se mantienen, es una opci칩n que puede tener sentido y React 17 permitir치 que estas aplicaciones no se queden atr치s."},{"heading":"actualizaciones-graduales","content":"Para habilitar las actualizaciones graduales, necesitamos realizar algunos cambios en el sistema de eventos de React. La versi칩n 17 es importante porque estos cambios potencialmente se est치 rompiendo. En la pr치ctica, solo se ha tenido que cambiar menos de 20 componentes de m치s de 100 mil, por lo que esperan, en React, que la mayor칤a de las aplicaciones puedan actualizarse a React 17 sin demasiados problemas. (ahora m치s en la pr치ctica, puede que haya problemas igual no?)"},{"heading":"actualizaciones-graduales","content":"Hay un repositorio de ejemplo que demuestra c칩mo cargar de forma diferida una versi칩n anterior de React si es necesario. Es una demo que utiliza CRA (create-react-app), pero deber칤a ser posible seguir un enfoque similar con cualquier otra herramienta. Aqu칤 el demo."},{"heading":"actualizaciones-graduales","content":"Algo importante que ellos mencionan:"},{"heading":"actualizaciones-graduales","content":"Se han pospuesto otros cambios hasta despu칠s de React 17. Porque si el objetivo de esta versi칩n es ayudar a la actualizaci칩n y a no dejar a nadie atr치s, pero la actualizaci칩n se torna demasiado dif칤cil, estar칤a totalmente frustrado el prop칩sito."},{"heading":"cambios-en-event-delegation","content":"T칠cnicamente, siempre ha sido posible anidar aplicaciones desarrolladas con diferentes versiones de React, pero es bastante fr치gil debido a c칩mo funcionaba el sistema de eventos de React."},{"heading":"cambios-en-event-delegation","content":"En los componentes de React, usualmente se escriben controladores de eventos en l칤nea."},{"heading":"cambios-en-event-delegation","content":"El c칩digo equivalente en DOM vanilla es algo como:"},{"heading":"cambios-en-event-delegation","content":"Sin imbargo, para la mayor칤a de los eventos, React no los adjunta a los nodos DOM en los que los declara. En cambio, React adjunta un controlador por tipo de evento directamente en el nodo document. A esto se le llama event delegation. Adem치s de sus beneficios de rendimiento en 치rboles grandes de una aplicaci칩n, tambi칠n facilita la edici칩n de nuevas funciones como la reproducci칩n de eventos."},{"heading":"cambios-en-event-delegation","content":"React ha estado delegando eventos autom치ticamente desde el primer lanzamiento. Cuando un evento DOM se dispara en el document, React determina a qu칠 componente llamar, y luego el evento React \"burbujea\" hacia arriba a trav칠s de sus componentes. Pero detr치s de escena, el evento nativo ya ha subido al nivel document, donde React instala sus controladores de eventos."},{"heading":"cambios-en-event-delegation","content":"Sin embargo, este es un problema para las actualizaciones graduales."},{"heading":"cambios-en-event-delegation","content":"Si tienes varias versiones de React en la p치gina, todas se registran controladores de eventos en la parte superior. Esto rompe e.stopProgataion(): si un 치rbol anidado ha detenido la propagaci칩n de un evento, el 치rbol externo a칰n no lo recibir치. Esto hizo que fuera dif칤cil anidar diferentes versiones de React. Esta preocupaci칩n, como mencionan ellos, no es hipot칠tica; por ejemplo, el editor Atom se encontr칩 con esto hace cuatro a침os."},{"heading":"cambios-en-event-delegation","content":"Es por eso (y luego de esta explicaci칩n anterior) que en React est치n cambiando la forma en que se adjunte los eventos al DOM debajo del cap칩."},{"heading":"cambios-en-event-delegation","content":"En React 17, ya no se adjuntar치 controladores de eventos en el nivel document. En cambio, los adjuntar치 al contenedor DOM ra칤z en el que se representa su 치rbol:"},{"heading":"cambios-en-event-delegation","content":"En React 16 y versiones anteriores, React document.addEventListener() funcionar칤a para la mayor칤a de eventos. React 17 llamar치 a rootNode.addEventListener() debajo del cap칩 en su lugar."},{"heading":"cambios-en-event-delegation","content":"Gracias a este importante cambio, ahora es m치s seguro incrustar un 치rbol de React administrado por una versi칩n dentro de un 치rbol administrado por una versi칩n de React diferente. Hay quer tener en cuenta que, para que esto funcione, ambas versiones deber칤an ser 17 o superior, por lo que es importante actualizar a la versi칩n 17. En cierto modo, React 17 es un release de \"trampol칤n\", que hace factible adelantarse a las futuras actualizaciones."},{"heading":"cambios-en-event-delegation","content":"Este cambio tambi칠n facilita la integraci칩n de React en aplicaciones creadas con otras tecnolog칤as. Por ejemplo, si el \"shell\" externo de una aplicaci칩n est치 escrito en jQuery, pero el c칩digo m치s nuevo dentro de 칠l est치 escrito con React, e.stopPropagation() dentro del c칩digo React ahora evitar칤a que alcance el c칩digo jQuery, como era de esperar. Esto tambi칠n funciona en direcci칩n contraria. Si ya no nos gustar치 React y dese치ramos reescribir la aplicaci칩n, por ejemplo, en jQuery, se puede comenzar a convertir el shel externo de React a jQuery sin interrumpir la propagaci칩n del evento."},{"heading":"cambios-en-event-delegation","content":"En React han confirmado que numerosos problemas reportados a lo largo de los a침os relacionado con la integraci칩n de React con c칩digo que no es de React."},{"heading":"cambios-en-event-delegation","content":"En el caso de los Portales, React tambi칠n escucha eventos de 칠l, as칤 que no es un problema."},{"heading":"solucionar-problemas-potenciales","content":"Al igual que con cualquier cambio importante, es probable que sea necesario ajustar alg칰n c칩digo. En Facebook, tuvieron que ajustar unos 10 m칩dulos en total (de muchos miles) para trabajar con este cambio."},{"heading":"solucionar-problemas-potenciales","content":"Por ejemplo, si se agrega listeners manuales al DOM con document.addEventListener(...) se puede esperar que capturen todos los eventos React. En React 16 y versiones anteriores, incluso si llama e.stopPropagation() a un controlador de eventos React, los listeners document personalizados a칰n lo recibir칤an porque el evento nativo ya est치 en el nivel del document. Con React 17, la propagaci칩n se detendr칤a (!seg칰n lo solicitado!), por que sus controladores document no disparar칤an:"},{"heading":"solucionar-problemas-potenciales","content":"Se puede corregir un c칩digo como este convirtiendo el listener para usar la fase de captura. Para hace esto, se puede pasar { capture: true } como tercer argumento a document.addEventListener:"},{"heading":"solucionar-problemas-potenciales","content":"Hay que tener en cuenta c칩mo esta estrategia es m치s resistente en general; por ejemplo, probablemente solucionar치 los errores existentes en el c칩digo que ocurren cuando e.stopPropagation() se llame fuera de un controlador de eventos de React. En otras palabras, la propagaci칩n de eventos en React 17 funciona m치s cerca del DOM normal."},{"heading":"otros-cambios-importantes","content":"Se ha mantenido los cambios importantes en React 17 al m칤nimo. Por ejemplo, no elimina ninguno de los m칠todos que han quedado obsoletos en versiones anteriores. Sin embargo, incluye algunos otros cambios importantes que han sido relativamente seguros la experiencia de React. En total, han tenido que ajustar menos de 20 de cada 100.000+ de los componentes debido a ellos."},{"heading":"alineando-con-los-navegadores","content":"Se han realizado un par de cambios m치s peque침os relacionados con el sistema de eventos:"},{"heading":"alineando-con-los-navegadores","content":"El evento onScroll ya no burbujea para evitar una confusi칩n com칰n."},{"heading":"alineando-con-los-navegadores","content":"Los eventos React onFocus y onBlur han cambiado al uso de eventos nativos focusin y focusout bajo el cap칩, que se ajustan m치s al comportamiento existente de React y, a veces, brindan informaci칩n adicional."},{"heading":"alineando-con-los-navegadores","content":"Los eventos de la fase de captura (ej: onClickCapture) ahora utilizan listeners de fase de captura reales de navegador."},{"heading":"alineando-con-los-navegadores","content":"Estos cambios alinean React m치s cerca del comportamiento del navegador y mejorar la interoperabilidad."},{"heading":"sin-agrupaci칩n-de-eventos","content":"React 17 elimina la optimizaci칩n de \"agrupaci칩n de ventos\" de React. No mejora el rendimiento en los navegadores modernos y confunde incluso a los usuarios experimentados de React:"},{"heading":"sin-agrupaci칩n-de-eventos","content":"Esto se debe a que React reutiliz칩 los objetos de eventos entre diferentes eventos para el rendimiento en navegadores antiguos y estableci칩 todos los campos de eventos null entre ellos. Con React 16 y versiones anteriores, se debe llamar a e.persist() para usar correctamente el evento o leer la propiedad que se necesita antes."},{"heading":"sin-agrupaci칩n-de-eventos","content":"En React 17, este c칩digo funciona como era de esperar. La antigua optimizaci칩n de agrupaci칩n de eventos se ha eliminado por completo, por lo que se puede leer los campos de eventos siempre que se necesite."},{"heading":"sin-agrupaci칩n-de-eventos","content":"Este es un cambio de comportamiento, por lo que est치n marcando como roto, pero en la pr치ctica no lo han visto romper nada en Facebook. (!Quiz치s incluso solucion칩 algunos errores!). Hay que tener en cuenta que e.persist() todav칤a est치 disponible en el objeto de evento React, pero ahora no hace nada."},{"heading":"effect-cleanup-timing","content":"Est치n haciendo que la sincronizaci칩n de la funci칩n de limpieza de useEffect sea m치s consistente."},{"heading":"effect-cleanup-timing","content":"La mayor칤a de los efectos no necesitan retrasar las actualizaciones de la pantalla, por lo que React los ejecuta de forma asincr칩nica poco despu칠s de que la actualizaci칩n se refleje en la pantalla. (Para los casos excepcionales en los que se necesite un efecto para bloquear el paint, por ejemplo, para medir y colocar una informaci칩n sobre herramientas, hay que preferir useLayoutEffect)."},{"heading":"effect-cleanup-timing","content":"Sin embargo, cuando se desmonta un componente, las funciones de limpieza del efecto se utilizan para ejecutarse sincr칩nicamente (similar a componentWillUnmount de manera sincr칩nica en las clases). Han descubierto que esto no es ideal para aplicaciones m치s grandes porque relentiza las transiciones de pantalla grande (por ejemplo, cambiar de pesta침a)."},{"heading":"effect-cleanup-timing","content":"En React 17, la funci칩n de limpieza de efectos siempre se ejecutar치 de forma asincr칩nica; por ejemplo, si el componente se est치 desmontando, la limpieza se ejecutar치 despu칠s de que se haya actualizado la pantalla."},{"heading":"effect-cleanup-timing","content":"Esto refleja c칩mo los efectos en s칤 se ejecutan m치s de cerca. En los raros casos en los que desee confiar en la ejecuci칩n sincr칩nica, se puede cambiar a useLayoutEffect."},{"heading":"effect-cleanup-timing","content":"Adem치s, React 17 siempre ejecutar치 todas las funciones de limpieza de efectos (para todos los componentes) antes de ejecutar cualquier efecto nuevo. React 16 solo garantiz칩 este orden para los efectos dentro de un componente."},{"heading":"problemas-potenciales","content":"Solo han visto un par de componentes que se rompen con este cambio, aunque es posible que las bibliotecas reutilizables deban probarlo m치s a fondo. Un ejemplo de c칩digo con problemas puede verse as칤:"},{"heading":"problemas-potenciales","content":"El problema es que el someRef.current es mutable, por lo que cuando se ejecuta la funci칩n de limpieza, es posible que se haya configurado en null. La soluci칩n es capturar cualquier valor mutable dentro del efecto:"},{"heading":"problemas-potenciales","content":"No esperan que esto sea un problema com칰n porque la regla de eslint eslint-plugin-react-hooks/exhaustive-deps (!칰sala!) siempre ha advertido sobre esto."},{"heading":"errores-consistentes-para-devolver-undefined","content":"En React 16 y versiones anteriores, regresar undefined siempre ha sido un error:"},{"heading":"errores-consistentes-para-devolver-undefined","content":"Esto se debe en parte a que es f치cil volver undefined sin querer:"},{"heading":"errores-consistentes-para-devolver-undefined","content":"Anteriormente, React solo hac칤a esto para los componentes de clase y funci칩n, pero no verificaba los valores de retorno de forwardRef y los componentes memo. Esto se debi칩 a un error de codificaci칩n."},{"heading":"errores-consistentes-para-devolver-undefined","content":"En React 17, el comportamiento de los componentes forwardRef y memo, es coherente con los componentes de clase y funciones regulares. Retornar undefined de ellos es un error."},{"heading":"errores-consistentes-para-devolver-undefined","content":"Para los casos en los que no se desee representar nada intencionalmente, se debe retornar null en su lugar."},{"heading":"stack-de-componentes-nativos","content":"Cuando el navegador arroja un error, el navegador proporciona un seguimiento del stack con los nombres de las funciones de JavaScript y sus ubicaciones. Sin embargo, los stack de JavaScript no suelen ser suficientes para diagnosticar un problema porque la jerarqu칤a del 치rbol de React puede ser igualmente importante. Se desea saber no solo que Button arroj칩 un error, sino tambi칠n en qu칠 parte del 치rbol de React el Buttonse encuentra."},{"heading":"stack-de-componentes-nativos","content":"Para resolver esto, React 16 comenz칩 a imprimir \"stack de componentes\" cuando se tiene un error. A칰n as칤, sol칤an ser inferiores a los stack de JavaScript nativos. En particular, no se pod칤a hacer clic en la consola porque React no sab칤a d칩nde se declar칩 la funci칩n en el c칩digo fuente. Adem치s, en su mayor칤a fueron in칰tiles en la producci칩n. A diferencia de los stack de JavaScript minificados regulares que se pueden restaurar autom치ticamente a los nombres de las funciones originales con un mapa de origen, con los stack de componentes de React se ten칤a que elegir entre el stack de producci칩n y tama침o de paquete."},{"heading":"stack-de-componentes-nativos","content":"En React 17, los stack de componentes se generan utilizando un mecanismo diferente que las une a los stack de JavaScript nativos normales. Esto permite obtener los seguimientos del stack de componentes de React completamente simbolizados en un entorno de producci칩n."},{"heading":"stack-de-componentes-nativos","content":"La forma en que React implementa esto es algo poco ortodoxo. Actualmente, los navegadores no proporcionan una forma de obtener el marco del stack de una funci칩n (archivo de origen y ubicaci칩n). Entonces, cuando React detecta un error, ahora reconstruir치 su stack de componentes lanzados (y capturando) un error temporal desde el interior de cada uno de los componentes anteriores, cuando sea posible. Esto agrega una peque침a penalizaci칩n de rendimiento por fallas, pero solo ocurre una vez por tipo de componente."},{"heading":"stack-de-componentes-nativos","content":"Esta parte constituye un cambio importante para que esto funcione, React vuelve a ejecutar partes de algunas de las funciones de React y los constructores de la clase React anteriores en la pila despu칠s de que se captura un error. Dado que las funciones de renderizado y los constructores de clases no deber칤an tener efectos secundarios (que tambi칠n es importante para la renderizaci칩n del servidor), esto no deber칤a plantear ning칰n problema pr치ctico."},{"heading":"eliminaci칩n-de-exportaciones-privadas","content":"Finalmente (s칤, por fin dir치s 游뱕), el 칰ltimo cambio notable es que han eliminado algunos componentes internos de React que estaba expuestos anteriormente a otros proyectos. En particular, React Native para Web, sol칤a depender de algunos componentes internos del sistema de eventos, pero esa dependencia era fr치gil y sol칤a romperse."},{"heading":"eliminaci칩n-de-exportaciones-privadas","content":"En React 17, estas exportaciones privadas se han eliminado. Hasta donde saben, React Native para Web fue el 칰nico proyecto que las us칩, y ya completaron una migraci칩n a un enfoque diferente que no depende de esas exportaciones privadas."},{"heading":"eliminaci칩n-de-exportaciones-privadas","content":"Esto significa que las versiones anteriores de React Native para Web, no ser치n compatibles con React 17, pero las versiones m치s nuevas funcionar치n con 칠l. En la pr치ctica, esto no cambia mucho porque React Native para Web tuvo que lanzar nuevas versiones para adaptarse a los cambios internos de React de todos modos."},{"heading":"eliminaci칩n-de-exportaciones-privadas","content":"Adem치s, han eliminado los m칠todos auxiliares ReactTestUtils.SimulateNative. Nunca se han documentado, no hicieron exactamente lo que sus nombres implicaban y no funcionaron con los cambios que se hicieron en el sistema de eventos. Si se desea una forma conveniente de activar eventos nativos del navegador en los tests, ver React Testing Library."},{"heading":"para-probar--instalaci칩n","content":"Si quieres probar el release candidate React 17.0 pronto y as칤 tambi칠n plantear alg칰n problema que puedas encontrar, debes tener en cuenta que es m치s probable que una versi칩n candidata contenga errores que una versi칩n estable, as칤 que no la implementes todav칤a en producci칩n."},{"heading":"para-probar--instalaci칩n","content":"Para instalar React 17 RC con NPM, debes ejecutar:"},{"heading":"para-probar--instalaci칩n","content":"Para instalar React 17 RC con Yarn, debes ejecutar:"},{"heading":"para-probar--instalaci칩n","content":"Tambi칠n se ha proporcionado compilaciones UMD de React a trav칠s de una CDN:"},{"heading":"para-probar--instalaci칩n","content":"Uff que largo."},{"heading":"para-probar--instalaci칩n","content":"Fuente: https://reactjs.org/blog/2020/08/10/react-v17-rc.html (ingl칠s)"}],"headings":[{"id":"no-tiene-nuevas-funciones","content":"No tiene nuevas funciones"},{"id":"actualizaciones-graduales","content":"Actualizaciones graduales"},{"id":"cambios-en-event-delegation","content":"Cambios en Event Delegation"},{"id":"solucionar-problemas-potenciales","content":"Solucionar problemas potenciales"},{"id":"otros-cambios-importantes","content":"Otros cambios importantes"},{"id":"alineando-con-los-navegadores","content":"Alineando con los navegadores"},{"id":"sin-agrupaci칩n-de-eventos","content":"Sin agrupaci칩n de eventos"},{"id":"effect-cleanup-timing","content":"Effect Cleanup Timing"},{"id":"problemas-potenciales","content":"Problemas potenciales"},{"id":"errores-consistentes-para-devolver-undefined","content":"Errores consistentes para devolver undefined"},{"id":"stack-de-componentes-nativos","content":"Stack de componentes nativos"},{"id":"eliminaci칩n-de-exportaciones-privadas","content":"Eliminaci칩n de exportaciones privadas"},{"id":"para-probar--instalaci칩n","content":"Para probar / Instalaci칩n"}]},"body":"var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var E=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var n in e)r(a,n,{get:e[n],enumerable:!0})},c=(a,e,n,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!g.call(a,s)&&s!==n&&r(a,s,{get:()=>e[s],enumerable:!(l=k(e,s))||l.enumerable});return a};var y=(a,e,n)=>(n=a!=null?p(u(a)):{},c(e||!a||!a.__esModule?r(n,\"default\",{value:a,enumerable:!0}):n,a)),v=a=>c(r({},\"__esModule\",{value:!0}),a);var o=E((F,t)=>{t.exports=_jsx_runtime});var f={};b(f,{default:()=>h});var i=y(o());function d(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",em:\"em\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:\"Hoy se ha publicado en el blog oficial de React el primer Release Candidate para React 17, luego de dos a\\xF1os y medio desde el \\xFAltimo release importante (ha pasado bastante no?).\"}),`\n`,(0,i.jsx)(e.h2,{id:\"no-tiene-nuevas-funciones\",children:\"No tiene nuevas funciones\"}),`\n`,(0,i.jsx)(e.p,{children:\"La versi\\xF3n 17 de React es bastante inusual, como dicen en el blog, porque no agrega ninguna caracter\\xEDstica nueva para desarrolladores. Es decir, si esper\\xE1bamos nuevos hooks para hacer otras cosas locas, no vendr\\xE1 nada de esto.\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Esta nueva versi\\xF3n se est\\xE1 centrando principalmente en \",(0,i.jsx)(e.strong,{children:\"facilitar la actualizaci\\xF3n de React\"}),\".\"]}),`\n`,(0,i.jsx)(e.p,{children:\"No hay que asustarse al pensar que no est\\xE1n trabajando en nuevas funcionalidades, al contrario, pero no forman parte de esta versi\\xF3n.\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"El enfoque est\\xE1 en \",(0,i.jsx)(e.strong,{children:\"no dejar a nadie atr\\xE1s\"}),\". React 17 es una versi\\xF3n \",(0,i.jsx)(e.strong,{children:'\"trampol\\xEDn\"'}),\" que hace que sea m\\xE1s seguro insertar un \\xE1rbol administraro por una versi\\xF3n de React dentro de un \\xE1rbol administrado por una versi\\xF3n diferente de React.\"]}),`\n`,(0,i.jsx)(e.h2,{id:\"actualizaciones-graduales\",children:\"Actualizaciones graduales\"}),`\n`,(0,i.jsx)(e.p,{children:'Durante los \\xFAltimos siete a\\xF1os, las actualizaciones de React han sido de \"todo o nada\". O te quedabas con una versi\\xF3n anterior o actualizas toda la aplicaci\\xF3n a una nueva versi\\xF3n. No hubo intermedios.'}),`\n`,(0,i.jsxs)(e.p,{children:[\"Esto hab\\xEDa funcionado hasta ahora, pero React est\\xE1 llegando a los l\\xEDmites de esa estrategia de actualizaci\\xF3n (todo o nada). Algunos cambios de API, por ejemplo, la desaprobaci\\xF3n de la \",(0,i.jsx)(e.em,{children:\"API de Contexto heredado\"}),\", son imposibles de realizar de una forma automatizada. Aunque la mayor\\xEDa de las aplicaciones escritas hoy en d\\xEDa nunca las usan, a\\xFAn se admiten en React. Se tendr\\xEDa que elegir entre admitirlas en React indefinitivamente o dejar algunas aplicaciones en una versi\\xF3n anterior de React, donde ambas opciones no son muy buenas.\"]}),`\n`,(0,i.jsx)(e.p,{children:\"Por eso es que se han enfocado en otra opci\\xF3n.\"}),`\n`,(0,i.jsx)(e.p,{children:\"React 17 va a permitir actualizaciones graduales de React. Cuando actualices React 15 a 16 (o 16 a 17 \\u{1F631}), generalmente actualizar\\xE1 toda la aplicaci\\xF3n de una vez. Esto funciona bien para muchas aplicaciones, pero puede volverse cada vez m\\xE1s desafiante si el c\\xF3digo base se escribi\\xF3 hace m\\xE1s de unos a\\xF1os y no se mantiene. Aunque es posible usar dos versiones de React en una misma p\\xE1gina, hasta React 17 esto ha sido fr\\xE1gil y ha causado problemas con los eventos.\"}),`\n`,(0,i.jsx)(e.p,{children:\"En React est\\xE1n solucionando muchos de estos problemas con React 17. Esto significa que cuando salga React 18 y las pr\\xF3ximas futuras versiones, ahora habr\\xE1n m\\xE1s opciones.\"}),`\n`,(0,i.jsx)(e.p,{children:\"La primera opci\\xF3n ser\\xE1 actualizar toda la aplicaci\\xF3n de una vez, como podr\\xEDa haber hecho antes. Pero tambi\\xE9n tendr\\xE1 la opci\\xF3n de actualizar la aplicaci\\xF3n pieza por pieza. Por ejemplo, se podr\\xE1 decidir migrar la mayor parte de una aplicaci\\xF3n a React 18, pero mantener un cuadro de di\\xE1logo cargado de forma diferida a una subruta en React 17.\"}),`\n`,(0,i.jsx)(e.p,{children:\"OJO: Esto no significa que se deben hacer mejoras graduales. Para la mayor\\xEDa de las aplicaciones, actualizar todo de una vez sigue siendo la mejor soluci\\xF3n. Cargar dos versiones de React, incluso si una de ellas se carga de forma Lazy a pedido, todav\\xEDa no es lo ideal. Sin embargo, para aplicaciones m\\xE1s grandes que no se mantienen, es una opci\\xF3n que puede tener sentido y React 17 permitir\\xE1 que estas aplicaciones no se queden atr\\xE1s.\"}),`\n`,(0,i.jsx)(e.p,{children:\"Para habilitar las actualizaciones graduales, necesitamos realizar algunos cambios en el sistema de eventos de React. La versi\\xF3n 17 es importante porque estos cambios potencialmente se est\\xE1 rompiendo. En la pr\\xE1ctica, solo se ha tenido que cambiar menos de 20 componentes de m\\xE1s de 100 mil, por lo que esperan, en React, que la mayor\\xEDa de las aplicaciones puedan actualizarse a React 17 sin demasiados problemas. (ahora m\\xE1s en la pr\\xE1ctica, puede que haya problemas igual no?)\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Hay un repositorio de ejemplo que demuestra c\\xF3mo cargar de forma diferida una versi\\xF3n anterior de React si es necesario. Es una demo que utiliza CRA (create-react-app), pero deber\\xEDa ser posible seguir un enfoque similar con cualquier otra herramienta. \",(0,i.jsx)(e.a,{href:\"https://github.com/reactjs/react-gradual-upgrade-demo/\",title:\"Aqu\\xED el demo.\",children:\"Aqu\\xED el demo.\"})]}),`\n`,(0,i.jsx)(e.p,{children:\"Algo importante que ellos mencionan:\"}),`\n`,(0,i.jsxs)(e.blockquote,{children:[`\n`,(0,i.jsx)(e.p,{children:\"Se han pospuesto otros cambios hasta despu\\xE9s de React 17. Porque si el objetivo de esta versi\\xF3n es ayudar a la actualizaci\\xF3n y a no dejar a nadie atr\\xE1s, pero la actualizaci\\xF3n se torna demasiado dif\\xEDcil, estar\\xEDa totalmente frustrado el prop\\xF3sito.\"}),`\n`]}),`\n`,(0,i.jsx)(e.h2,{id:\"cambios-en-event-delegation\",children:\"Cambios en Event Delegation\"}),`\n`,(0,i.jsx)(e.p,{children:\"T\\xE9cnicamente, siempre ha sido posible anidar aplicaciones desarrolladas con diferentes versiones de React, pero es bastante fr\\xE1gil debido a c\\xF3mo funcionaba el sistema de eventos de React.\"}),`\n`,(0,i.jsx)(e.p,{children:\"En los componentes de React, usualmente se escriben controladores de eventos en l\\xEDnea.\"}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsx)(e.code,{children:(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"<\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#22863A\",\"--shiki-dark\":\"#85E89D\"},children:\"button\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\" onClick\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"{handleClick}>\"})]})})}),`\n`,(0,i.jsx)(e.p,{children:\"El c\\xF3digo equivalente en DOM vanilla es algo como:\"}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.js\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z\" fill=\"currentColor\" /></svg>',children:(0,i.jsx)(e.code,{children:(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"myButton.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"addEventListener\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\"'click'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\", handleClick)\"})]})})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Sin imbargo, para la mayor\\xEDa de los eventos, React no los adjunta a los nodos DOM en los que los declara. En cambio, React adjunta un controlador por tipo de evento directamente en el nodo \",(0,i.jsx)(e.code,{children:\"document\"}),\". A esto se le llama \",(0,i.jsx)(e.strong,{children:\"event delegation\"}),\". Adem\\xE1s de sus beneficios de rendimiento en \\xE1rboles grandes de una aplicaci\\xF3n, tambi\\xE9n facilita la edici\\xF3n de nuevas funciones como la \",(0,i.jsx)(e.strong,{children:\"reproducci\\xF3n de eventos\"}),\".\"]}),`\n`,(0,i.jsxs)(e.p,{children:['React ha estado delegando eventos autom\\xE1ticamente desde el primer lanzamiento. Cuando un evento DOM se dispara en el document, React determina a qu\\xE9 componente llamar, y luego el evento React \"burbujea\" hacia arriba a trav\\xE9s de sus componentes. Pero detr\\xE1s de escena, el evento nativo ya ha subido al nivel ',(0,i.jsx)(e.code,{children:\"document\"}),\", donde React instala sus controladores de eventos.\"]}),`\n`,(0,i.jsx)(e.p,{children:\"Sin embargo, este es un problema para las actualizaciones graduales.\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Si tienes varias versiones de React en la p\\xE1gina, todas se registran controladores de eventos en la parte superior. Esto rompe \",(0,i.jsx)(e.code,{children:\"e.stopProgataion()\"}),\": si un \\xE1rbol anidado ha detenido la propagaci\\xF3n de un evento, el \\xE1rbol externo a\\xFAn no lo recibir\\xE1. Esto hizo que fuera dif\\xEDcil anidar diferentes versiones de React. Esta preocupaci\\xF3n, como mencionan ellos, no es hipot\\xE9tica; por ejemplo, el editor Atom se encontr\\xF3 con esto hace cuatro a\\xF1os.\"]}),`\n`,(0,i.jsx)(e.p,{children:\"Es por eso (y luego de esta explicaci\\xF3n anterior) que en React est\\xE1n cambiando la forma en que se adjunte los eventos al DOM debajo del cap\\xF3.\"}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsxs)(e.strong,{children:[\"En React 17, ya no se adjuntar\\xE1 controladores de eventos en el nivel \",(0,i.jsx)(e.code,{children:\"document\"}),\". En cambio, los adjuntar\\xE1 al contenedor DOM ra\\xEDz en el que se representa su \\xE1rbol:\"]})}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"const\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},children:\" rootNode\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" document.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"getElementById\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\"'root'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\")\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"ReactDOM.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"render\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(<\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},children:\"App\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" />, rootNode)\"})]})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"En React 16 y versiones anteriores, React \",(0,i.jsx)(e.code,{children:\"document.addEventListener()\"}),\" funcionar\\xEDa para la mayor\\xEDa de eventos. React 17 llamar\\xE1 a \",(0,i.jsx)(e.code,{children:\"rootNode.addEventListener()\"}),\" debajo del cap\\xF3 en su lugar.\"]}),`\n`,(0,i.jsx)(e.p,{children:'Gracias a este importante cambio, ahora es m\\xE1s seguro incrustar un \\xE1rbol de React administrado por una versi\\xF3n dentro de un \\xE1rbol administrado por una versi\\xF3n de React diferente. Hay quer tener en cuenta que, para que esto funcione, ambas versiones deber\\xEDan ser 17 o superior, por lo que es importante actualizar a la versi\\xF3n 17. En cierto modo, React 17 es un release de \"trampol\\xEDn\", que hace factible adelantarse a las futuras actualizaciones.'}),`\n`,(0,i.jsxs)(e.p,{children:['Este cambio tambi\\xE9n facilita la integraci\\xF3n de React en aplicaciones creadas con otras tecnolog\\xEDas. Por ejemplo, si el \"shell\" externo de una aplicaci\\xF3n est\\xE1 escrito en jQuery, pero el c\\xF3digo m\\xE1s nuevo dentro de \\xE9l est\\xE1 escrito con React, ',(0,i.jsx)(e.code,{children:\"e.stopPropagation()\"}),\" dentro del c\\xF3digo React ahora evitar\\xEDa que alcance el c\\xF3digo jQuery, como era de esperar. Esto tambi\\xE9n funciona en direcci\\xF3n contraria. Si ya no nos gustar\\xE1 React y dese\\xE1ramos reescribir la aplicaci\\xF3n, por ejemplo, en jQuery, se puede comenzar a convertir el shel externo de React a jQuery sin interrumpir la propagaci\\xF3n del evento.\"]}),`\n`,(0,i.jsx)(e.p,{children:\"En React han confirmado que numerosos problemas reportados a lo largo de los a\\xF1os relacionado con la integraci\\xF3n de React con c\\xF3digo que no es de React.\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"En el caso de los \",(0,i.jsx)(e.strong,{children:\"Portales\"}),\", React tambi\\xE9n escucha eventos de \\xE9l, as\\xED que no es un problema.\"]}),`\n`,(0,i.jsx)(e.h3,{id:\"solucionar-problemas-potenciales\",children:\"Solucionar problemas potenciales\"}),`\n`,(0,i.jsx)(e.p,{children:\"Al igual que con cualquier cambio importante, es probable que sea necesario ajustar alg\\xFAn c\\xF3digo. En Facebook, tuvieron que ajustar unos 10 m\\xF3dulos en total (de muchos miles) para trabajar con este cambio.\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Por ejemplo, si se agrega listeners manuales al DOM con \",(0,i.jsx)(e.code,{children:\"document.addEventListener(...)\"}),\" se puede esperar que capturen todos los eventos React. En React 16 y versiones anteriores, incluso si llama \",(0,i.jsx)(e.code,{children:\"e.stopPropagation()\"}),\" a un controlador de eventos React, los listeners \",(0,i.jsx)(e.code,{children:\"document\"}),\" personalizados a\\xFAn lo recibir\\xEDan porque el evento nativo ya est\\xE1 en el nivel del document. Con React 17, la propagaci\\xF3n se detendr\\xEDa (!seg\\xFAn lo solicitado!), por que sus controladores \",(0,i.jsx)(e.code,{children:\"document\"}),\" no disparar\\xEDan:\"]}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.js\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"document.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"addEventListener\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\"'click'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\", \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"function\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" () {\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // este controlador no recibir\\xE1 m\\xE1s clics\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // de los componentes de React que llamen e.stopPropagation()\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"})\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Se puede corregir un c\\xF3digo como este convirtiendo el listener para usar la fase de captura. Para hace esto, se puede pasar \",(0,i.jsx)(e.code,{children:\"{ capture: true }\"}),\" como tercer argumento a \",(0,i.jsx)(e.code,{children:\"document.addEventListener\"}),\":\"]}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.js\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"document.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"addEventListener\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\"  'click'\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"  function\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" () {\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"    // ahora este controlador de evento usa la fase de captura\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"    // por lo que recibe *todos* los eventos de clic que siguen\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  },\"})}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  { capture: \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},children:\"true\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" }\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\")\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Hay que tener en cuenta c\\xF3mo esta estrategia es m\\xE1s resistente en general; por ejemplo, probablemente solucionar\\xE1 los errores existentes en el c\\xF3digo que ocurren cuando \",(0,i.jsx)(e.code,{children:\"e.stopPropagation()\"}),\" se llame fuera de un controlador de eventos de React. En otras palabras, la propagaci\\xF3n de eventos en React 17 funciona m\\xE1s cerca del DOM normal.\"]}),`\n`,(0,i.jsx)(e.hr,{}),`\n`,(0,i.jsx)(e.h2,{id:\"otros-cambios-importantes\",children:\"Otros cambios importantes\"}),`\n`,(0,i.jsx)(e.p,{children:\"Se ha mantenido los cambios importantes en React 17 al m\\xEDnimo. Por ejemplo, no elimina ninguno de los m\\xE9todos que han quedado obsoletos en versiones anteriores. Sin embargo, incluye algunos otros cambios importantes que han sido relativamente seguros la experiencia de React. En total, han tenido que ajustar menos de 20 de cada 100.000+ de los componentes debido a ellos.\"}),`\n`,(0,i.jsx)(e.h3,{id:\"alineando-con-los-navegadores\",children:\"Alineando con los navegadores\"}),`\n`,(0,i.jsx)(e.p,{children:\"Se han realizado un par de cambios m\\xE1s peque\\xF1os relacionados con el sistema de eventos:\"}),`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsxs)(e.li,{children:[\"El evento \",(0,i.jsx)(e.code,{children:\"onScroll\"}),\" \",(0,i.jsx)(e.strong,{children:\"ya no burbujea\"}),\" para evitar una confusi\\xF3n com\\xFAn.\"]}),`\n`,(0,i.jsxs)(e.li,{children:[\"Los eventos React \",(0,i.jsx)(e.code,{children:\"onFocus\"}),\" y \",(0,i.jsx)(e.code,{children:\"onBlur\"}),\" han cambiado al uso de eventos nativos \",(0,i.jsx)(e.code,{children:\"focusin\"}),\" y \",(0,i.jsx)(e.code,{children:\"focusout\"}),\" bajo el cap\\xF3, que se ajustan m\\xE1s al comportamiento existente de React y, a veces, brindan informaci\\xF3n adicional.\"]}),`\n`,(0,i.jsxs)(e.li,{children:[\"Los eventos de la fase de captura (ej: \",(0,i.jsx)(e.code,{children:\"onClickCapture\"}),\") ahora utilizan listeners de fase de captura reales de navegador.\"]}),`\n`]}),`\n`,(0,i.jsx)(e.p,{children:\"Estos cambios alinean React m\\xE1s cerca del comportamiento del navegador y mejorar la interoperabilidad.\"}),`\n`,(0,i.jsx)(e.h3,{id:\"sin-agrupaci\\xF3n-de-eventos\",children:\"Sin agrupaci\\xF3n de eventos\"}),`\n`,(0,i.jsx)(e.p,{children:'React 17 elimina la optimizaci\\xF3n de \"agrupaci\\xF3n de ventos\" de React. No mejora el rendimiento en los navegadores modernos y confunde incluso a los usuarios experimentados de React:'}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"function\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\" handleChange\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},children:\"e\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\") {\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"  setData\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"((\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},children:\"data\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\") \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" ({\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"    ...\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"data,\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"    // esto hace crash en React 16 y anteriores\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"    text: e.target.value\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  }))\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"}\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Esto se debe a que React reutiliz\\xF3 los objetos de eventos entre diferentes eventos para el rendimiento en navegadores antiguos y estableci\\xF3 todos los campos de eventos \",(0,i.jsx)(e.code,{children:\"null\"}),\" entre ellos. Con React 16 y versiones anteriores, se debe llamar a \",(0,i.jsx)(e.code,{children:\"e.persist()\"}),\" para usar correctamente el evento o leer la propiedad que se necesita antes.\"]}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\"En React 17, este c\\xF3digo funciona como era de esperar. La antigua optimizaci\\xF3n de agrupaci\\xF3n de eventos se ha eliminado por completo, por lo que se puede leer los campos de eventos siempre que se necesite.\"})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Este es un cambio de comportamiento, por lo que est\\xE1n marcando como roto, pero en la pr\\xE1ctica no lo han visto romper nada en Facebook. (!Quiz\\xE1s incluso solucion\\xF3 algunos errores!). Hay que tener en cuenta que \",(0,i.jsx)(e.code,{children:\"e.persist()\"}),\" todav\\xEDa est\\xE1 disponible en el objeto de evento React, pero ahora no hace nada.\"]}),`\n`,(0,i.jsx)(e.h3,{id:\"effect-cleanup-timing\",children:\"Effect Cleanup Timing\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Est\\xE1n haciendo que la sincronizaci\\xF3n de la funci\\xF3n de limpieza de \",(0,i.jsx)(e.code,{children:\"useEffect\"}),\" sea m\\xE1s consistente.\"]}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"useEffect\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(() \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // este es el efecto en s\\xED\"})}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"  return\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" () \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"    // esto es un limpiador\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"})\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"La mayor\\xEDa de los efectos no necesitan retrasar las actualizaciones de la pantalla, por lo que React los ejecuta de forma asincr\\xF3nica poco despu\\xE9s de que la actualizaci\\xF3n se refleje en la pantalla. (Para los casos excepcionales en los que se necesite un efecto para bloquear el paint, por ejemplo, para medir y colocar una informaci\\xF3n sobre herramientas, hay que preferir \",(0,i.jsx)(e.code,{children:\"useLayoutEffect\"}),\").\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"Sin embargo, cuando se desmonta un componente, las funciones de \",(0,i.jsx)(e.em,{children:\"limpieza\"}),\" del efecto se utilizan para ejecutarse sincr\\xF3nicamente (similar a \",(0,i.jsx)(e.code,{children:\"componentWillUnmount\"}),\" de manera sincr\\xF3nica en las clases). Han descubierto que esto no es ideal para aplicaciones m\\xE1s grandes porque relentiza las transiciones de pantalla grande (por ejemplo, cambiar de pesta\\xF1a).\"]}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\"En React 17, la funci\\xF3n de limpieza de efectos siempre se ejecutar\\xE1 de forma asincr\\xF3nica; por ejemplo, si el componente se est\\xE1 desmontando, la limpieza se ejecutar\\xE1 despu\\xE9s de que se haya actualizado la pantalla.\"})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Esto refleja c\\xF3mo los efectos en s\\xED se ejecutan m\\xE1s de cerca. En los raros casos en los que desee confiar en la ejecuci\\xF3n sincr\\xF3nica, se puede cambiar a \",(0,i.jsx)(e.code,{children:\"useLayoutEffect\"}),\".\"]}),`\n`,(0,i.jsx)(e.p,{children:\"Adem\\xE1s, React 17 siempre ejecutar\\xE1 todas las funciones de limpieza de efectos (para todos los componentes) antes de ejecutar cualquier efecto nuevo. React 16 solo garantiz\\xF3 este orden para los efectos dentro de un componente.\"}),`\n`,(0,i.jsx)(e.h3,{id:\"problemas-potenciales\",children:\"Problemas potenciales\"}),`\n`,(0,i.jsx)(e.p,{children:\"Solo han visto un par de componentes que se rompen con este cambio, aunque es posible que las bibliotecas reutilizables deban probarlo m\\xE1s a fondo. Un ejemplo de c\\xF3digo con problemas puede verse as\\xED:\"}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"useEffect\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(() \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  someRef.current.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"someSetupMethod\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"  return\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" () \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"    someRef.current.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"someCleanupMethod\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"})\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"El problema es que el \",(0,i.jsx)(e.code,{children:\"someRef.current\"}),\" es mutable, por lo que cuando se ejecuta la funci\\xF3n de limpieza, es posible que se haya configurado en \",(0,i.jsx)(e.code,{children:\"null\"}),\". La soluci\\xF3n es capturar cualquier valor mutable \",(0,i.jsx)(e.em,{children:\"dentro\"}),\" del efecto:\"]}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"useEffect\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(() \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"  const\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},children:\" instance\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\" =\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" someRef.current\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  instance.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"someSetupMethod\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"  return\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" () \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"    instance.\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"someCleanupMethod\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  }\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"})\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"No esperan que esto sea un problema com\\xFAn porque la regla de eslint \",(0,i.jsx)(e.strong,{children:\"eslint-plugin-react-hooks/exhaustive-deps\"}),\" (!\\xFAsala!) siempre ha advertido sobre esto.\"]}),`\n`,(0,i.jsx)(e.h3,{id:\"errores-consistentes-para-devolver-undefined\",children:\"Errores consistentes para devolver undefined\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"En React 16 y versiones anteriores, regresar \",(0,i.jsx)(e.code,{children:\"undefined\"}),\" siempre ha sido un error:\"]}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"function\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\" Button\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"  return\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\" // error: nada ha retornado\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"}\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Esto se debe en parte a que es f\\xE1cil volver \",(0,i.jsx)(e.code,{children:\"undefined\"}),\" sin querer:\"]}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"function\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\" Button\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"() {\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // hemos olvidado escribir return, por lo tanto este componente retorna undefined\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // React muestra esto como un error en lugar de ignorarlo\"})}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  ;\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"<\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"button \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"/>\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"}\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Anteriormente, React solo hac\\xEDa esto para los componentes de clase y funci\\xF3n, pero no verificaba los valores de retorno de \",(0,i.jsx)(e.code,{children:\"forwardRef\"}),\" y los componentes \",(0,i.jsx)(e.code,{children:\"memo\"}),\". Esto se debi\\xF3 a un error de codificaci\\xF3n.\"]}),`\n`,(0,i.jsx)(e.p,{children:\"En React 17, el comportamiento de los componentes forwardRef y memo, es coherente con los componentes de clase y funciones regulares. Retornar undefined de ellos es un error.\"}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",title:\"index.jsx\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" Button \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\" forwardRef\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(() \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // hemos olvidado escribir return, por lo tanto este componente retorna undefined\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // React 17 muestra esto como un error en lugar de ignorarlo\"})}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  ;\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"<\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"button \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"/>\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"})\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"let\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" Button \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\" memo\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"(() \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"=>\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\" {\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // hemos olvidado escribir return, por lo tanto este componente retorna undefined\"})}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},children:\"  // React 17 muestra esto como un error en lugar de ignorarlo\"})}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"  ;\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"<\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"button \"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},children:\"/>\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"})\"})})]})}),`\n`,(0,i.jsxs)(e.p,{children:[\"Para los casos en los que no se desee representar nada intencionalmente, se debe retornar \",(0,i.jsx)(e.code,{children:\"null\"}),\" en su lugar.\"]}),`\n`,(0,i.jsx)(e.h3,{id:\"stack-de-componentes-nativos\",children:\"Stack de componentes nativos\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Cuando el navegador arroja un error, el navegador proporciona un seguimiento del stack con los nombres de las funciones de JavaScript y sus ubicaciones. Sin embargo, los stack de JavaScript no suelen ser suficientes para diagnosticar un problema porque la jerarqu\\xEDa del \\xE1rbol de React puede ser igualmente importante. Se desea saber no solo que \",(0,i.jsx)(e.code,{children:\"Button\"}),\" arroj\\xF3 un error, sino tambi\\xE9n en qu\\xE9 parte del \\xE1rbol de React el \",(0,i.jsx)(e.code,{children:\"Button\"}),\"se encuentra.\"]}),`\n`,(0,i.jsx)(e.p,{children:'Para resolver esto, React 16 comenz\\xF3 a imprimir \"stack de componentes\" cuando se tiene un error. A\\xFAn as\\xED, sol\\xEDan ser inferiores a los stack de JavaScript nativos. En particular, no se pod\\xEDa hacer clic en la consola porque React no sab\\xEDa d\\xF3nde se declar\\xF3 la funci\\xF3n en el c\\xF3digo fuente. Adem\\xE1s, en su mayor\\xEDa fueron in\\xFAtiles en la producci\\xF3n. A diferencia de los stack de JavaScript minificados regulares que se pueden restaurar autom\\xE1ticamente a los nombres de las funciones originales con un mapa de origen, con los stack de componentes de React se ten\\xEDa que elegir entre el stack de producci\\xF3n y tama\\xF1o de paquete.'}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\"En React 17, los stack de componentes se generan utilizando un mecanismo diferente que las une a los stack de JavaScript nativos normales. Esto permite obtener los seguimientos del stack de componentes de React completamente simbolizados en un entorno de producci\\xF3n.\"})}),`\n`,(0,i.jsx)(e.p,{children:\"La forma en que React implementa esto es algo poco ortodoxo. Actualmente, los navegadores no proporcionan una forma de obtener el marco del stack de una funci\\xF3n (archivo de origen y ubicaci\\xF3n). Entonces, cuando React detecta un error, ahora reconstruir\\xE1 su stack de componentes lanzados (y capturando) un error temporal desde el interior de cada uno de los componentes anteriores, cuando sea posible. Esto agrega una peque\\xF1a penalizaci\\xF3n de rendimiento por fallas, pero solo ocurre una vez por tipo de componente.\"}),`\n`,(0,i.jsx)(e.p,{children:\"Esta parte constituye un cambio importante para que esto funcione, React vuelve a ejecutar partes de algunas de las funciones de React y los constructores de la clase React anteriores en la pila despu\\xE9s de que se captura un error. Dado que las funciones de renderizado y los constructores de clases no deber\\xEDan tener efectos secundarios (que tambi\\xE9n es importante para la renderizaci\\xF3n del servidor), esto no deber\\xEDa plantear ning\\xFAn problema pr\\xE1ctico.\"}),`\n`,(0,i.jsx)(e.h3,{id:\"eliminaci\\xF3n-de-exportaciones-privadas\",children:\"Eliminaci\\xF3n de exportaciones privadas\"}),`\n`,(0,i.jsx)(e.p,{children:\"Finalmente (s\\xED, por fin dir\\xE1s \\u{1F92A}), el \\xFAltimo cambio notable es que han eliminado algunos componentes internos de React que estaba expuestos anteriormente a otros proyectos. En particular, React Native para Web, sol\\xEDa depender de algunos componentes internos del sistema de eventos, pero esa dependencia era fr\\xE1gil y sol\\xEDa romperse.\"}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:\"En React 17, estas exportaciones privadas se han eliminado. Hasta donde saben, React Native para Web fue el \\xFAnico proyecto que las us\\xF3, y ya completaron una migraci\\xF3n a un enfoque diferente que no depende de esas exportaciones privadas.\"})}),`\n`,(0,i.jsx)(e.p,{children:\"Esto significa que las versiones anteriores de React Native para Web, no ser\\xE1n compatibles con React 17, pero las versiones m\\xE1s nuevas funcionar\\xE1n con \\xE9l. En la pr\\xE1ctica, esto no cambia mucho porque React Native para Web tuvo que lanzar nuevas versiones para adaptarse a los cambios internos de React de todos modos.\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Adem\\xE1s, han eliminado los m\\xE9todos auxiliares \",(0,i.jsx)(e.code,{children:\"ReactTestUtils.SimulateNative\"}),\". Nunca se han documentado, no hicieron exactamente lo que sus nombres implicaban y no funcionaron con los cambios que se hicieron en el sistema de eventos. Si se desea una forma conveniente de activar eventos nativos del navegador en los tests, ver \",(0,i.jsx)(e.a,{href:\"https://testing-library.com/docs/dom-testing-library/api-events\",title:\"React Testing Library\",children:\"React Testing Library\"}),\".\"]}),`\n`,(0,i.jsx)(e.h2,{id:\"para-probar--instalaci\\xF3n\",children:\"Para probar / Instalaci\\xF3n\"}),`\n`,(0,i.jsx)(e.p,{children:\"Si quieres probar el release candidate React 17.0 pronto y as\\xED tambi\\xE9n plantear alg\\xFAn problema que puedas encontrar, debes tener en cuenta que es m\\xE1s probable que una versi\\xF3n candidata contenga errores que una versi\\xF3n estable, as\\xED que no la implementes todav\\xEDa en producci\\xF3n.\"}),`\n`,(0,i.jsx)(e.p,{children:\"Para instalar React 17 RC con NPM, debes ejecutar:\"}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"m 4,4 a 1,1 0 0 0 -0.7070312,0.2929687 1,1 0 0 0 0,1.4140625 L 8.5859375,11 3.2929688,16.292969 a 1,1 0 0 0 0,1.414062 1,1 0 0 0 1.4140624,0 l 5.9999998,-6 a 1.0001,1.0001 0 0 0 0,-1.414062 L 4.7070312,4.2929687 A 1,1 0 0 0 4,4 Z m 8,14 a 1,1 0 0 0 -1,1 1,1 0 0 0 1,1 h 8 a 1,1 0 0 0 1,-1 1,1 0 0 0 -1,-1 z\" fill=\"currentColor\" /></svg>',children:(0,i.jsx)(e.code,{children:(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"npm\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\" install\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\" react@17.0.0-rc.2\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\" react-dom@17.0.0-rc.2\"})]})})}),`\n`,(0,i.jsx)(e.p,{children:\"Para instalar React 17 RC con Yarn, debes ejecutar:\"}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"m 4,4 a 1,1 0 0 0 -0.7070312,0.2929687 1,1 0 0 0 0,1.4140625 L 8.5859375,11 3.2929688,16.292969 a 1,1 0 0 0 0,1.414062 1,1 0 0 0 1.4140624,0 l 5.9999998,-6 a 1.0001,1.0001 0 0 0 0,-1.414062 L 4.7070312,4.2929687 A 1,1 0 0 0 4,4 Z m 8,14 a 1,1 0 0 0 -1,1 1,1 0 0 0 1,1 h 8 a 1,1 0 0 0 1,-1 1,1 0 0 0 -1,-1 z\" fill=\"currentColor\" /></svg>',children:(0,i.jsx)(e.code,{children:(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"yarn\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\" add\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\" react@17.0.0-rc.2\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:\" react-dom@17.0.0-rc.2\"})]})})}),`\n`,(0,i.jsx)(e.p,{children:\"Tambi\\xE9n se ha proporcionado compilaciones UMD de React a trav\\xE9s de una CDN:\"}),`\n`,(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light github-dark\",style:{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},tabIndex:\"0\",icon:'<svg viewBox=\"0 0 24 24\"><path d=\"M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z\" fill=\"currentColor\" /></svg>',children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"<\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#22863A\",\"--shiki-dark\":\"#85E89D\"},children:\"script\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"  crossorigin\"})}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"  src\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"=\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:'\"https://unpkg.com/react@17.0.0-rc.2/umd/react.production.min.js\"'})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"></\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#22863A\",\"--shiki-dark\":\"#85E89D\"},children:\"script\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\">\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"<\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#22863A\",\"--shiki-dark\":\"#85E89D\"},children:\"script\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"  crossorigin\"})}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},children:\"  src\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"=\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},children:'\"https://unpkg.com/react-dom@17.0.0-rc.2/umd/react-dom.production.min.js\"'})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\"></\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#22863A\",\"--shiki-dark\":\"#85E89D\"},children:\"script\"}),(0,i.jsx)(e.span,{style:{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},children:\">\"})]})]})}),`\n`,(0,i.jsx)(e.p,{children:\"Uff que largo.\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Fuente: \",(0,i.jsx)(e.a,{href:\"https://reactjs.org/blog/2020/08/10/react-v17-rc.html\",children:\"https://reactjs.org/blog/2020/08/10/react-v17-rc.html\"}),\" (ingl\\xE9s)\"]})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,i.jsx)(e,{...a,children:(0,i.jsx)(d,{...a})}):d(a)}return v(f);})();\n;return Component;"}